import{c as j,r as g,j as e,X as I,A as z,L as T,u as q,a as P,S as V,b as H}from"./index-PcNZ_Iqf.js";import{C as L,f as O,u as U}from"./useApplications-DVSfh56O.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],J=j("arrow-up-down",B);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],_=j("building",Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],E=j("chevron-down",G);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],W=j("chevron-up",K);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],R=j("dollar-sign",X);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Z=j("external-link",Q);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],se=j("funnel",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],ae=j("grid-3x3",te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],le=j("link",re);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ie=j("list",ne);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],D=j("plus",ce);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],oe=j("save",de);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],he=j("search",me);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pe=j("square-pen",xe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ye=j("trash-2",ue),F=s=>{const c=typeof s=="string"?new Date(s):s;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(c)},ge=s=>{const c=typeof s=="string"?new Date(s):s,b=new Date().getTime()-c.getTime(),d=Math.floor(b/1e3),t=Math.floor(d/60),h=Math.floor(t/60),x=Math.floor(h/24),r=Math.floor(x/7),o=Math.floor(x/30);return d<60?"just now":t<60?`${t} minute${t>1?"s":""} ago`:h<24?`${h} hour${h>1?"s":""} ago`:x<7?`${x} day${x>1?"s":""} ago`:r<4?`${r} week${r>1?"s":""} ago`:o<12?`${o} month${o>1?"s":""} ago`:F(c)},$=s=>{const c=new Date,n=new Date;switch(s){case"week":n.setDate(n.getDate()-7);break;case"month":n.setMonth(n.getMonth()-1);break;case"quarter":n.setMonth(n.getMonth()-3);break;case"year":n.setFullYear(n.getFullYear()-1);break}return{start:n.toISOString().split("T")[0],end:c.toISOString().split("T")[0]}},je=({application:s,onEdit:c,onDelete:n,onClick:b})=>{const[d,t]=g.useState(!1),h=l=>{l.target.closest(".action-button")||(t(!d),b?.(s))},x=l=>{l.stopPropagation(),c(s)},r=l=>{l.stopPropagation(),window.confirm("Are you sure you want to delete this application?")&&n(s.id)},o=l=>({Applied:"bg-blue-100 text-blue-800","Phone Call":"bg-purple-100 text-purple-800","1st Interview":"bg-purple-100 text-purple-800","2nd Interview":"bg-purple-100 text-purple-800",Offer:"bg-green-100 text-green-800","Rejected after Applying":"bg-red-100 text-red-800","Rejected after Phone Call":"bg-red-100 text-red-800","Rejected after 1st Interview":"bg-red-100 text-red-800","Rejected after 2nd Interview":"bg-red-100 text-red-800",Ghosted:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800";return e.jsxs("div",{className:`application-card ${d?"application-card-expanded":""}`,onClick:h,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-gray-600 font-medium",children:s.company})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o(s.status)}`,children:s.status}),e.jsx("button",{onClick:x,className:"action-button p-1 text-gray-400 hover:text-gray-600 rounded",title:"Edit application",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r,className:"action-button p-1 text-gray-400 hover:text-red-600 rounded",title:"Delete application",children:e.jsx(ye,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:F(s.dateApplied)})]}),s.salary&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:O(s.salary)}),e.jsxs("span",{className:"ml-1 text-xs",children:["(",s.salaryType,")"]})]}),s.jobLink&&e.jsxs("a",{href:s.jobLink,target:"_blank",rel:"noopener noreferrer",className:"action-button flex items-center text-blue-600 hover:text-blue-800",onClick:l=>l.stopPropagation(),children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"View Job"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:ge(s.updatedAt)}),e.jsx("button",{className:"flex items-center text-xs text-gray-500 hover:text-gray-700",onClick:l=>{l.stopPropagation(),t(!d)},children:d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"Less"}),e.jsx(W,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"More"}),e.jsx(E,{className:"w-4 h-4"})]})})]}),d&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-3",children:[s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.notes})]}),s.benefits&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Benefits"}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.benefits})]}),s.selectionCriteria&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Selection Criteria"}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.selectionCriteria})]}),s.interviewNotes&&s.interviewNotes.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:["Interview Notes (",s.interviewNotes.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[s.interviewNotes.slice(0,2).map(l=>e.jsxs("div",{className:"bg-gray-50 rounded p-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 capitalize",children:[l.type," - ",F(l.date)]})}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:l.notes})]},l.id)),s.interviewNotes.length>2&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",s.interviewNotes.length-2," more interview notes"]})]})]})]})]})},be=({filters:s,onFiltersChange:c,companies:n,isOpen:b,onToggle:d})=>{const[t,h]=g.useState(s);g.useEffect(()=>{h(s)},[s]);const x=(a,i)=>{const p=i?[...t.status||[],a]:(t.status||[]).filter(w=>w!==a),N={...t,status:p.length>0?p:void 0};h(N),c(N)},r=(a,i)=>{const p=i?[...t.companies||[],a]:(t.companies||[]).filter(w=>w!==a),N={...t,companies:p.length>0?p:void 0};h(N),c(N)},o=a=>{let i;a==="custom"?i=t.dateRange||$("month"):i=$(a);const p={...t,dateRange:i};h(p),c(p)},l=(a,i)=>{const p={start:a==="start"?i:t.dateRange?.start||"",end:a==="end"?i:t.dateRange?.end||""},N={...t,dateRange:p};h(N),c(N)},f=a=>{const i=a.target.value||void 0,p={...t,searchTerm:i};h(p),c(p)},m=()=>{const a={};h(a),c(a)},y=!!(t.status?.length||t.companies?.length||t.dateRange||t.searchTerm);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:d,className:`btn ${b?"btn-primary":"btn-secondary"} flex items-center relative`,children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Filters",y&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]}),b&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 p-4 w-80 z-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[y&&e.jsx("button",{onClick:m,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx(I,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(he,{className:"w-4 h-4 inline mr-2"}),"Search"]}),e.jsx("input",{type:"text",className:"input",placeholder:"Search jobs or companies...",value:t.searchTerm||"",onChange:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:z.map(a=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 mr-2",checked:t.status?.includes(a)||!1,onChange:i=>x(a,i.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]},a))})]}),n.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(_,{className:"w-4 h-4 inline mr-2"}),"Companies"]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:n.map(a=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 mr-2",checked:t.companies?.includes(a)||!1,onChange:i=>r(a,i.target.checked)}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(L,{className:"w-4 h-4 inline mr-2"}),"Date Range"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"week",label:"Last 7 days"},{key:"month",label:"Last 30 days"},{key:"quarter",label:"Last 90 days"},{key:"year",label:"Last year"}].map(({key:a,label:i})=>e.jsx("button",{onClick:()=>o(a),className:"text-sm py-1 px-2 rounded border border-gray-300 hover:bg-gray-50 text-left",children:i},a))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"From"}),e.jsx("input",{type:"date",className:"input text-xs",value:t.dateRange?.start||"",onChange:a=>l("start",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500",children:"To"}),e.jsx("input",{type:"date",className:"input text-xs",value:t.dateRange?.end||"",onChange:a=>l("end",a.target.value)})]})]})})]})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:d})]})},Ne=({applications:s,loading:c,error:n,onCreateNew:b,onEdit:d,onDelete:t,filters:h,onFiltersChange:x,filteredApplications:r})=>{const[o,l]=g.useState("grid"),[f,m]=g.useState(!1),[y,a]=g.useState("updatedAt"),[i,p]=g.useState("desc"),[N,w]=g.useState(!1),A=g.useMemo(()=>[...new Set(s.map(k=>k.company))].sort(),[s]),M=g.useMemo(()=>[...r].sort((u,k)=>{let C=u[y],S=k[y];return(y==="dateApplied"||y==="updatedAt")&&(C=new Date(C).getTime(),S=new Date(S).getTime()),typeof C=="string"&&(C=C.toLowerCase(),S=S.toLowerCase()),C<S?i==="asc"?-1:1:C>S?i==="asc"?1:-1:0}),[r,y,i]),v=u=>{u===y?p(k=>k==="asc"?"desc":"asc"):(a(u),p("desc")),w(!1)};return c&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(T,{size:"lg"})}):n?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("p",{className:"text-lg font-medium",children:"Error loading applications"}),e.jsx("p",{className:"text-sm",children:n})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Job Applications"}),e.jsxs("p",{className:"text-gray-600",children:[s.length," total • ",r.length," filtered"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>w(!N),className:"btn btn-secondary flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sort: "}),e.jsx("span",{className:"sm:hidden",children:"Sort"}),e.jsx(E,{className:"w-4 h-4 ml-1"})]}),N&&e.jsx("div",{className:"absolute top-full right-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-48 z-50",children:[{field:"updatedAt",label:"Last Updated"},{field:"dateApplied",label:"Date Applied"},{field:"company",label:"Company"},{field:"title",label:"Job Title"},{field:"status",label:"Status"}].map(({field:u,label:k})=>e.jsxs("button",{onClick:()=>v(u),className:`w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ${y===u?"bg-blue-50 text-blue-700":"text-gray-700"}`,children:[k,y===u&&e.jsx("span",{className:"ml-2",children:i==="asc"?"↑":"↓"})]},u))})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded",children:[e.jsx("button",{onClick:()=>l("grid"),className:`p-2 ${o==="grid"?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,title:"Grid view",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l("list"),className:`p-2 ${o==="list"?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,title:"List view",children:e.jsx(ie,{className:"w-4 h-4"})})]}),e.jsx(be,{filters:h,onFiltersChange:x,companies:A,isOpen:f,onToggle:()=>m(!f)}),e.jsxs("button",{onClick:b,className:"btn btn-primary flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Application"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),M.length===0?e.jsx("div",{className:"text-center py-12",children:s.length===0?e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-medium text-gray-900 mb-2",children:"No applications yet"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Start tracking your job applications by adding your first one."}),e.jsxs("button",{onClick:b,className:"btn btn-primary flex items-center mx-auto",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Add Your First Application"]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-medium text-gray-900 mb-2",children:"No applications match your filters"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Try adjusting your search criteria or clearing the filters."}),e.jsx("button",{onClick:()=>x({}),className:"btn btn-secondary",children:"Clear Filters"})]})}):e.jsx("div",{className:o==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:M.map(u=>e.jsx(je,{application:u,onEdit:d,onDelete:t},u.id))}),c&&s.length>0&&e.jsxs("div",{className:"fixed top-4 right-4 bg-white rounded-lg shadow-lg p-3 flex items-center space-x-2",children:[e.jsx(T,{size:"sm"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Syncing..."})]}),(N||f)&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>{w(!1),m(!1)}})]})},fe=({application:s,isOpen:c,onClose:n,onSubmit:b,loading:d=!1})=>{const{register:t,handleSubmit:h,reset:x,formState:{errors:r,isSubmitting:o}}=q({resolver:P(H),defaultValues:{salaryType:"Seek Estimate"}});g.useEffect(()=>{if(c)if(s){const m=s.dateApplied.includes("T")?s.dateApplied.split("T")[0]:s.dateApplied;x({title:s.title,company:s.company,jobLink:s.jobLink||"",dateApplied:m,status:s.status,salary:s.salary||"",salaryType:s.salaryType,benefits:s.benefits||"",notes:s.notes||"",selectionCriteria:s.selectionCriteria||""})}else x({title:"",company:"",jobLink:"",dateApplied:new Date().toISOString().split("T")[0],status:"Applied",salary:"",salaryType:"Seek Estimate",benefits:"",notes:"",selectionCriteria:""})},[s,c,x]);const l=async m=>{try{await b(m),n()}catch(y){console.error("Form submission error:",y)}},f=m=>{m.target===m.currentTarget&&n()};return c?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Application":"Add New Application"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:o||d,children:e.jsx(I,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:h(l),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(_,{className:"w-4 h-4 inline mr-2"}),"Job Title *"]}),e.jsx("input",{...t("title"),type:"text",className:"input",placeholder:"e.g., Software Engineer"}),r.title&&e.jsx("p",{className:"form-error",children:r.title.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(_,{className:"w-4 h-4 inline mr-2"}),"Company *"]}),e.jsx("input",{...t("company"),type:"text",className:"input",placeholder:"e.g., Tech Corp"}),r.company&&e.jsx("p",{className:"form-error",children:r.company.message})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(le,{className:"w-4 h-4 inline mr-2"}),"Job Posting URL"]}),e.jsx("input",{...t("jobLink"),type:"url",className:"input",placeholder:"https://company.com/jobs/123"}),r.jobLink&&e.jsx("p",{className:"form-error",children:r.jobLink.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(L,{className:"w-4 h-4 inline mr-2"}),"Date Applied *"]}),e.jsx("input",{...t("dateApplied"),type:"date",className:"input"}),r.dateApplied&&e.jsx("p",{className:"form-error",children:r.dateApplied.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsx("select",{...t("status"),className:"input",children:z.map(m=>e.jsx("option",{value:m,children:m},m))}),r.status&&e.jsx("p",{className:"form-error",children:r.status.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(R,{className:"w-4 h-4 inline mr-2"}),"Salary"]}),e.jsx("input",{...t("salary"),type:"text",className:"input",placeholder:"e.g., 80000"}),r.salary&&e.jsx("p",{className:"form-error",children:r.salary.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary Type"}),e.jsx("select",{...t("salaryType"),className:"input",children:V.map(m=>e.jsx("option",{value:m,children:m},m))}),r.salaryType&&e.jsx("p",{className:"form-error",children:r.salaryType.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Benefits"}),e.jsx("textarea",{...t("benefits"),className:"input min-h-[80px] resize-y",placeholder:"Health insurance, 401k, remote work...",rows:3}),r.benefits&&e.jsx("p",{className:"form-error",children:r.benefits.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Notes"}),e.jsx("textarea",{...t("notes"),className:"input min-h-[100px] resize-y",placeholder:"Additional notes about this application...",rows:4}),r.notes&&e.jsx("p",{className:"form-error",children:r.notes.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Selection Criteria"}),e.jsx("textarea",{...t("selectionCriteria"),className:"input min-h-[120px] resize-y",placeholder:"Key requirements and how you meet them...",rows:5}),r.selectionCriteria&&e.jsx("p",{className:"form-error",children:r.selectionCriteria.message})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:o||d,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary flex items-center",disabled:o||d,children:o||d?e.jsx(T,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),s?"Update":"Save"]})})]})]})]})}):null},ke=()=>{const{applications:s,filteredApplications:c,loading:n,error:b,create:d,update:t,remove:h,filter:x}=U(),[r,o]=g.useState(!1),[l,f]=g.useState(),[m,y]=g.useState(!1),[a,i]=g.useState({}),p=()=>{f(void 0),o(!0)},N=v=>{f(v),o(!0)},w=async v=>{try{await h(v)}catch(u){console.error("Error deleting application:",u)}},A=async v=>{try{y(!0),l?await t(l.id,v):await d(v),o(!1),f(void 0)}catch(u){throw console.error("Error saving application:",u),u}finally{y(!1)}},M=v=>{i(v),x(v)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(Ne,{applications:s,filteredApplications:c,loading:n,error:b,onCreateNew:p,onEdit:N,onDelete:w,filters:a,onFiltersChange:M}),e.jsx(fe,{application:l,isOpen:r,onClose:()=>{o(!1),f(void 0)},onSubmit:A,loading:m})]})};export{ke as default};
