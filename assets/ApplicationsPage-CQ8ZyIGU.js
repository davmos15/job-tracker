import{c as y,r as p,j as e,X as D,A as E,L as T,u as P,a as I,S as O,b as V}from"./index-pPWDgRKD.js";import{C as L,f as B,u as H}from"./useApplications-DQxOraSZ.js";import{T as U,f as _,a as J,g as R,P as z,S as G}from"./dateUtils-p8ZL9GRX.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],K=y("arrow-up-down",Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],F=y("building",X);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],q=y("chevron-down",Q);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Z=y("chevron-up",W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],$=y("dollar-sign",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],te=y("external-link",se);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ae=y("funnel",re);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],le=y("grid-3x3",ne);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ie=y("link",de);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ce=y("list",oe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xe=y("search",me);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ue=y("square-pen",he),pe=({application:s,onEdit:m,onDelete:g,onClick:j})=>{const[i,t]=p.useState(!1),u=n=>{n.target.closest(".action-button")||(t(!i),j?.(s))},N=n=>{n.stopPropagation(),m(s)},a=n=>{n.stopPropagation(),window.confirm("Are you sure you want to delete this application?")&&g(s.id)},x=n=>({Applied:"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300","Phone Call":"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300","1st Interview":"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300","2nd Interview":"bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",Offer:"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300","Rejected after Applying":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300","Rejected after Phone Call":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300","Rejected after 1st Interview":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300","Rejected after 2nd Interview":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",Ghosted:"bg-gray-100 dark:bg-gray-700/30 text-gray-800 dark:text-gray-300"})[n]||"bg-gray-100 dark:bg-gray-700/30 text-gray-800 dark:text-gray-300";return e.jsxs("div",{className:`card p-6 cursor-pointer transition-all duration-200 hover:shadow-lg ${i?"ring-2 ring-primary/20":""}`,onClick:u,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground truncate",children:s.title}),e.jsx("p",{className:"text-muted-foreground font-medium",children:s.company})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x(s.status)}`,children:s.status}),e.jsx("button",{onClick:N,className:"action-button p-2 text-muted-foreground hover:text-foreground hover:bg-accent rounded-lg transition-colors",title:"Edit application",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"action-button p-2 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-lg transition-colors",title:"Delete application",children:e.jsx(U,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:_(s.dateApplied)})]}),s.salary&&e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:B(s.salary)}),e.jsxs("span",{className:"ml-1 text-xs",children:["(",s.salaryType,")"]})]}),s.jobLink&&e.jsxs("a",{href:s.jobLink,target:"_blank",rel:"noopener noreferrer",className:"action-button flex items-center text-blue-600 hover:text-blue-800",onClick:n=>n.stopPropagation(),children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),e.jsx("span",{children:"View Job"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:J(s.updatedAt)}),e.jsx("button",{className:"flex items-center text-xs text-muted-foreground hover:text-foreground",onClick:n=>{n.stopPropagation(),t(!i)},children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"Less"}),e.jsx(Z,{className:"w-4 h-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:"More"}),e.jsx(q,{className:"w-4 h-4"})]})})]}),i&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-border space-y-3",children:[s.notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.notes})]}),s.benefits&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:"Benefits"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.benefits})]}),s.selectionCriteria&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-foreground mb-1",children:"Selection Criteria"}),e.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:s.selectionCriteria})]}),s.interviewNotes&&s.interviewNotes.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-foreground mb-2",children:["Interview Notes (",s.interviewNotes.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[s.interviewNotes.slice(0,2).map(n=>e.jsxs("div",{className:"bg-accent rounded p-2",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsxs("span",{className:"text-xs font-medium text-foreground capitalize",children:[n.type," - ",_(n.date)]})}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:n.notes})]},n.id)),s.interviewNotes.length>2&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",s.interviewNotes.length-2," more interview notes"]})]})]})]})]})},ge=({filters:s,onFiltersChange:m,companies:g,isOpen:j,onToggle:i})=>{const[t,u]=p.useState(s);p.useEffect(()=>{u(s)},[s]);const N=(r,l)=>{const o=l?[...t.status||[],r]:(t.status||[]).filter(k=>k!==r),b={...t,status:o.length>0?o:void 0};u(b),m(b)},a=(r,l)=>{const o=l?[...t.companies||[],r]:(t.companies||[]).filter(k=>k!==r),b={...t,companies:o.length>0?o:void 0};u(b),m(b)},x=r=>{let l;r==="custom"?l=t.dateRange||R("month"):l=R(r);const o={...t,dateRange:l};u(o),m(o)},n=(r,l)=>{const o={start:r==="start"?l:t.dateRange?.start||"",end:r==="end"?l:t.dateRange?.end||""},b={...t,dateRange:o};u(b),m(b)},f=r=>{const l=r.target.value||void 0,o={...t,searchTerm:l};u(o),m(o)},d=()=>{const r={};u(r),m(r)},h=!!(t.status?.length||t.companies?.length||t.dateRange||t.searchTerm);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:i,className:`btn ${j?"btn-primary":"btn-secondary"} flex items-center relative`,children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Filters",h&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:"!"})]}),j&&e.jsxs("div",{className:"fixed md:absolute inset-x-4 md:inset-x-auto md:left-0 md:right-auto bottom-4 md:bottom-auto md:top-full md:mt-2 bg-card rounded-lg shadow-lg border border-border p-4 md:p-6 w-auto md:w-96 max-w-[calc(100vw-2rem)] md:max-w-md z-50 max-h-[80vh] md:max-h-[600px] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Filters"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[h&&e.jsx("button",{onClick:d,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Clear all"}),e.jsx("button",{onClick:i,className:"p-1 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:e.jsx(D,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"space-y-4 overflow-y-auto flex-1 pr-2",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 flex items-center",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Search"]}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-input bg-background text-foreground rounded-lg focus:outline-none focus:ring-2 focus:ring-ring/20 focus:border-ring transition-colors",placeholder:"Search jobs or companies...",value:t.searchTerm||"",onChange:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Status"}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto pr-2",children:E.map(r=>e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-accent transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-input bg-background text-primary focus:ring-primary/20 mr-3",checked:t.status?.includes(r)||!1,onChange:l=>N(r,l.target.checked)}),e.jsx("span",{className:"text-sm text-foreground",children:r})]},r))})]}),g.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 flex items-center",children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Companies"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto pr-2",children:g.map(r=>e.jsxs("label",{className:"flex items-center p-2 rounded-lg hover:bg-accent transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded border-input bg-background text-primary focus:ring-primary/20 mr-3",checked:t.companies?.includes(r)||!1,onChange:l=>a(r,l.target.checked)}),e.jsx("span",{className:"text-sm text-foreground truncate",children:r})]},r))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-foreground mb-2 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Date Range"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"week",label:"7 days"},{key:"month",label:"30 days"},{key:"quarter",label:"90 days"},{key:"year",label:"1 year"}].map(({key:r,label:l})=>e.jsx("button",{onClick:()=>x(r),className:"text-xs py-2 px-3 rounded-lg border border-input bg-background text-foreground hover:bg-accent transition-colors",children:l},r))}),e.jsxs("div",{className:"border-t border-border pt-3",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Custom Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"From"}),e.jsx("input",{type:"date",className:"w-full px-2 py-1 text-xs border border-input bg-background text-foreground rounded focus:outline-none focus:ring-1 focus:ring-ring/20",value:t.dateRange?.start||"",onChange:r=>n("start",r.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"To"}),e.jsx("input",{type:"date",className:"w-full px-2 py-1 text-xs border border-input bg-background text-foreground rounded focus:outline-none focus:ring-1 focus:ring-ring/20",value:t.dateRange?.end||"",onChange:r=>n("end",r.target.value)})]})]})]})]})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:i})]})},be=({applications:s,loading:m,error:g,onCreateNew:j,onEdit:i,onDelete:t,filters:u,onFiltersChange:N,filteredApplications:a})=>{const[x,n]=p.useState("grid"),[f,d]=p.useState(!1),[h,r]=p.useState("updatedAt"),[l,o]=p.useState("desc"),[b,k]=p.useState(!1),M=p.useMemo(()=>[...new Set(s.map(w=>w.company))].sort(),[s]),A=p.useMemo(()=>[...a].sort((c,w)=>{let C=c[h],S=w[h];return(h==="dateApplied"||h==="updatedAt")&&(C=new Date(C).getTime(),S=new Date(S).getTime()),typeof C=="string"&&(C=C.toLowerCase(),S=S.toLowerCase()),C<S?l==="asc"?-1:1:C>S?l==="asc"?1:-1:0}),[a,h,l]),v=c=>{c===h?o(w=>w==="asc"?"desc":"asc"):(r(c),o("desc")),k(!1)};return m&&s.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(T,{size:"lg"})}):g?e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-600 mb-4",children:[e.jsx("p",{className:"text-lg font-medium",children:"Error loading applications"}),e.jsx("p",{className:"text-sm",children:g})]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Job Applications"}),e.jsxs("p",{className:"text-muted-foreground",children:[s.length," total • ",a.length," filtered"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>k(!b),className:"btn btn-secondary flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Sort: "}),e.jsx("span",{className:"sm:hidden",children:"Sort"}),e.jsx(q,{className:"w-4 h-4 ml-1"})]}),b&&e.jsx("div",{className:"absolute top-full right-0 mt-2 bg-card rounded-lg shadow-lg border border-border py-2 w-48 z-50",children:[{field:"updatedAt",label:"Last Updated"},{field:"dateApplied",label:"Date Applied"},{field:"company",label:"Company"},{field:"title",label:"Job Title"},{field:"status",label:"Status"}].map(({field:c,label:w})=>e.jsxs("button",{onClick:()=>v(c),className:`w-full text-left px-4 py-2 text-sm hover:bg-accent ${h===c?"bg-accent text-primary":"text-foreground"}`,children:[w,h===c&&e.jsx("span",{className:"ml-2",children:l==="asc"?"↑":"↓"})]},c))})]}),e.jsxs("div",{className:"flex border border-input rounded",children:[e.jsx("button",{onClick:()=>n("grid"),className:`p-2 ${x==="grid"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-accent"}`,title:"Grid view",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n("list"),className:`p-2 ${x==="list"?"bg-primary text-primary-foreground":"bg-background text-muted-foreground hover:bg-accent"}`,title:"List view",children:e.jsx(ce,{className:"w-4 h-4"})})]}),e.jsx(ge,{filters:u,onFiltersChange:N,companies:M,isOpen:f,onToggle:()=>d(!f)}),e.jsxs("button",{onClick:j,className:"btn btn-primary flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Application"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),A.length===0?e.jsx("div",{className:"text-center py-12",children:s.length===0?e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-medium text-foreground mb-2",children:"No applications yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start tracking your job applications by adding your first one."}),e.jsxs("button",{onClick:j,className:"btn btn-primary flex items-center mx-auto",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Add Your First Application"]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-medium text-foreground mb-2",children:"No applications match your filters"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clearing the filters."}),e.jsx("button",{onClick:()=>N({}),className:"btn btn-secondary",children:"Clear Filters"})]})}):e.jsx("div",{className:x==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:A.map(c=>e.jsx(pe,{application:c,onEdit:i,onDelete:t},c.id))}),m&&s.length>0&&e.jsxs("div",{className:"fixed top-4 right-4 bg-card rounded-lg shadow-lg p-3 flex items-center space-x-2",children:[e.jsx(T,{size:"sm"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Syncing..."})]}),(b||f)&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>{k(!1),d(!1)}})]})},fe=({application:s,isOpen:m,onClose:g,onSubmit:j,loading:i=!1})=>{const{register:t,handleSubmit:u,reset:N,formState:{errors:a,isSubmitting:x}}=P({resolver:I(V),defaultValues:{salaryType:"Seek Estimate"}});p.useEffect(()=>{if(m)if(s){const d=s.dateApplied.includes("T")?s.dateApplied.split("T")[0]:s.dateApplied;N({title:s.title,company:s.company,jobLink:s.jobLink||"",dateApplied:d,status:s.status,salary:s.salary||"",salaryType:s.salaryType,benefits:s.benefits||"",notes:s.notes||"",selectionCriteria:s.selectionCriteria||""})}else N({title:"",company:"",jobLink:"",dateApplied:new Date().toISOString().split("T")[0],status:"Applied",salary:"",salaryType:"Seek Estimate",benefits:"",notes:"",selectionCriteria:""})},[s,m,N]);const n=async d=>{try{await j(d),g()}catch(h){console.error("Form submission error:",h)}},f=d=>{d.target===d.currentTarget&&g()};return m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:f,children:e.jsxs("div",{className:"bg-card rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:s?"Edit Application":"Add New Application"}),e.jsx("button",{onClick:g,className:"text-muted-foreground hover:text-foreground transition-colors",disabled:x||i,children:e.jsx(D,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:u(n),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(F,{className:"w-4 h-4 inline mr-2"}),"Job Title *"]}),e.jsx("input",{...t("title"),type:"text",className:"input",placeholder:"e.g., Software Engineer"}),a.title&&e.jsx("p",{className:"form-error",children:a.title.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(F,{className:"w-4 h-4 inline mr-2"}),"Company *"]}),e.jsx("input",{...t("company"),type:"text",className:"input",placeholder:"e.g., Tech Corp"}),a.company&&e.jsx("p",{className:"form-error",children:a.company.message})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ie,{className:"w-4 h-4 inline mr-2"}),"Job Posting URL"]}),e.jsx("input",{...t("jobLink"),type:"url",className:"input",placeholder:"https://company.com/jobs/123"}),a.jobLink&&e.jsx("p",{className:"form-error",children:a.jobLink.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(L,{className:"w-4 h-4 inline mr-2"}),"Date Applied *"]}),e.jsx("input",{...t("dateApplied"),type:"date",className:"input"}),a.dateApplied&&e.jsx("p",{className:"form-error",children:a.dateApplied.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Status"}),e.jsx("select",{...t("status"),className:"input",children:E.map(d=>e.jsx("option",{value:d,children:d},d))}),a.status&&e.jsx("p",{className:"form-error",children:a.status.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx($,{className:"w-4 h-4 inline mr-2"}),"Salary"]}),e.jsx("input",{...t("salary"),type:"text",className:"input",placeholder:"e.g., 80000"}),a.salary&&e.jsx("p",{className:"form-error",children:a.salary.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Salary Type"}),e.jsx("select",{...t("salaryType"),className:"input",children:O.map(d=>e.jsx("option",{value:d,children:d},d))}),a.salaryType&&e.jsx("p",{className:"form-error",children:a.salaryType.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Benefits"}),e.jsx("textarea",{...t("benefits"),className:"input min-h-[80px] resize-y",placeholder:"Health insurance, 401k, remote work...",rows:3}),a.benefits&&e.jsx("p",{className:"form-error",children:a.benefits.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Notes"}),e.jsx("textarea",{...t("notes"),className:"input min-h-[100px] resize-y",placeholder:"Additional notes about this application...",rows:4}),a.notes&&e.jsx("p",{className:"form-error",children:a.notes.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Selection Criteria"}),e.jsx("textarea",{...t("selectionCriteria"),className:"input min-h-[120px] resize-y",placeholder:"Key requirements and how you meet them...",rows:5}),a.selectionCriteria&&e.jsx("p",{className:"form-error",children:a.selectionCriteria.message})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:g,className:"btn btn-secondary",disabled:x||i,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary flex items-center",disabled:x||i,children:x||i?e.jsx(T,{size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),s?"Update":"Save"]})})]})]})]})}):null},ve=()=>{const{applications:s,filteredApplications:m,loading:g,error:j,create:i,update:t,remove:u,filter:N}=H(),[a,x]=p.useState(!1),[n,f]=p.useState(),[d,h]=p.useState(!1),[r,l]=p.useState({}),o=()=>{f(void 0),x(!0)},b=v=>{f(v),x(!0)},k=async v=>{try{await u(v)}catch(c){console.error("Error deleting application:",c)}},M=async v=>{try{h(!0),n?await t(n.id,v):await i(v),x(!1),f(void 0)}catch(c){throw console.error("Error saving application:",c),c}finally{h(!1)}},A=v=>{l(v),N(v)};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(be,{applications:s,filteredApplications:m,loading:g,error:j,onCreateNew:o,onEdit:b,onDelete:k,filters:r,onFiltersChange:A}),e.jsx(fe,{application:n,isOpen:a,onClose:()=>{x(!1),f(void 0)},onSubmit:M,loading:d})]})};export{ve as default};
